// quiz-cartridge-switching.js
// このファイルは、固定問題モードで使用されるクイズのデータセットです。
// PDF資料の第4章 (スイッチングとSTP) を基に作成されました。

(function() {
    const switchingQuiz = {
        title: "スイッチングとSTP基礎",
        questions: [
            {
                "question": "スイッチがフレームを転送する際に、宛先を判断するために参照するテーブルは何ですか？",
                "options": ["ルーティングテーブル", "ARPテーブル", "MACアドレステーブル", "ポートフォワーディングテーブル"],
                "answer": "MACアドレステーブル",
                "explanation": "スイッチは、MACアドレステーブルを参照し、宛先MACアドレスに対応するポートを調べてフレームを転送します。"
            },
            {
                "question": "スイッチは、どのようにしてMACアドレステーブルの情報を学習しますか？",
                "options": ["ARPリクエストを送信して学習する", "受信したフレームの宛先MACアドレスを学習する", "受信したフレームの送信元MACアドレスと受信ポートを学習する", "管理者が手動で登録する"],
                "answer": "受信したフレームの送信元MACアドレスと受信ポートを学習する",
                "explanation": "スイッチは、フレームを受信した際に、そのフレームの「送信元MACアドレス」と「受信したポート」の組み合わせをMACアドレステーブルに登録（学習）します。"
            },
            {
                "question": "スイッチが受信したフレームの宛先MACアドレスが、MACアドレステーブルに登録されていない場合、どのような動作をしますか？",
                "options": ["フレームを破棄する", "送信元にエラーを返す", "ルータに転送する", "受信ポート以外の全ポートにフレームを転送する（フラッディング）"],
                "answer": "受信ポート以外の全ポートにフレームを転送する（フラッディング）",
                "explanation": "宛先が不明な場合、スイッチは受信ポートを除くすべてのポートにそのフレームをコピーして転送します。これをフラッディングと呼びます。"
            },
            {
                "question": "スイッチを複数台使って冗長構成にした際に、意図しないループが発生すると起こる問題は何ですか？",
                "options": ["コリジョンの多発", "ブロードキャストストーム", "IPアドレスの重複", "ポートセキュリティ違反"],
                "answer": "ブロードキャストストーム",
                "explanation": "ループ構成においてブロードキャストフレームが無限に転送され続ける現象で、ネットワーク帯域を使い果たし、正常な通信を妨げます。"
            },
            {
                "question": "ネットワークのループ構成によるブロードキャストストームを防ぐためのプロトコルは何ですか？",
                "options": ["ARP", "VTP", "STP", "DHCP"],
                "answer": "STP",
                "explanation": "STP (Spanning Tree Protocol) は、物理的にループ構成のネットワークにおいて、論理的にループが発生しないように一部のポートをブロッキングするプロトコルです。"
            },
            {
                "question": "STPにおいて、ネットワークの中心として選出されるスイッチを何と呼びますか？",
                "options": ["マスタースイッチ", "ルートブリッジ", "コアスイッチ", "指定スイッチ"],
                "answer": "ルートブリッジ",
                "explanation": "STPは、まずネットワーク内に1台のルートブリッジを選出し、それを基準にトポロジを計算します。"
            },
            {
                "question": "ルートブリッジの選出に使われる「ブリッジID」を構成する2つの要素は何ですか？",
                "options": ["IPアドレスとMACアドレス", "ブリッジプライオリティとMACアドレス", "ホスト名とポート数", "ブリッジプライオリティとIPアドレス"],
                "answer": "ブリッジプライオリティとMACアドレス",
                "explanation": "ブリッジIDは、ブリッジプライオリティ（優先度）とスイッチ自身のMACアドレスで構成されます。まずプライオリティの値を比較し、同じ場合はMACアドレスの値を比較します。"
            },
            {
                "question": "STPの選出プロセスにおいて、最も優先される（値が小さい方が選ばれる）のはどれですか？",
                "options": ["最も小さいMACアドレス", "最も小さいブリッジID", "最も大きいブリッジプライオリティ", "最も大きいIPアドレス"],
                "answer": "最も小さいブリッジID",
                "explanation": "STPでは、ブリッジIDが最も小さい（ユニークで最小の）スイッチがルートブリッジとして選出されます。"
            },
            {
                "question": "ルートブリッジ以外のスイッチで、ルートブリッジへ到達するためのコストが最も低いポートを何と呼びますか？",
                "options": ["指定ポート (Designated Port)", "非指定ポート (Non-Designated Port)", "ブロッキングポート (Blocking Port)", "ルートポート (Root Port)"],
                "answer": "ルートポート (Root Port)",
                "explanation": "各非ルートブリッジスイッチに1つだけ存在するポートで、ルートブリッジへの最短経路を提供するポートです。常にフォワーディング状態になります。"
            },
            {
                "question": "STPによってループを防ぐために、データの送受信が止められる（ブロッキングされる）ポートの状態は何ですか？",
                "options": ["フォワーディング", "リスニング", "ラーニング", "非指定ポート"],
                "answer": "非指定ポート",
                "explanation": "ルートポートでも指定ポートでもないポートが非指定ポートとなり、ブロッキング状態になります。これにより、論理的なループが回避されます。"
            },
            {
                "question": "STPにおける「パスコスト」は何を基準に決定されますか？",
                "options": ["スイッチ間の物理的な距離", "経由するホップ数", "リンク（ケーブル）の帯域幅", "ポートの番号"],
                "answer": "リンク（ケーブル）の帯域幅",
                "explanation": "パスコストは、スイッチ間のリンクの帯域幅に基づいて計算されます。帯域幅が広いほどパスコストは小さくなり、優先的な経路と見なされます。"
            }
        ]
    };

    if (window.quizCartridges) {
        window.quizCartridges.push(switchingQuiz);
    }

})();
